From 3a981298faab65ec0d624ebfc7b514d5fcd43b5c Mon Sep 17 00:00:00 2001
From: MXE <mxe@mxe.cc>
Date: Thu, 23 Sep 2010 21:41:51 +0200
Subject: [PATCH 1/7] optional gettext

---
 configure.ac | 4 ++--
 glib/gi18n.h | 5 +++++
 2 files changed, 7 insertions(+), 2 deletions(-)

diff --git a/configure.ac b/configure.ac
index 108a411..ea1cd63 100644
--- a/configure.ac
+++ b/configure.ac
@@ -453,8 +453,8 @@ AC_SUBST([CONFIG_STATUS_DEPENDENCIES],['$(top_srcdir)/po/LINGUAS'])
 GLIB_GNU_GETTEXT
 
 if test "$gt_cv_have_gettext" != "yes" ; then
-  AC_MSG_ERROR([
-*** You must have either have gettext support in your C library, or use the 
+  AC_MSG_WARN([
+*** You should have either have gettext support in your C library, or use the 
 *** GNU gettext library. (http://www.gnu.org/software/gettext/gettext.html
 ])
 fi
diff --git a/glib/gi18n.h b/glib/gi18n.h
index f765c3d..a1e5e1f 100644
--- a/glib/gi18n.h
+++ b/glib/gi18n.h
@@ -20,7 +20,12 @@
 
 #include <glib.h>
 
+#ifdef ENABLE_NLS
 #include <libintl.h>
+#else
+#define gettext(String) (String)
+#endif
+
 #include <string.h>
 
 #define  _(String) gettext (String)
-- 
1.8.5

